<div class="manager-container">
  <div class="header">
    <div class="title-section">
      <h2>Agent Work Board</h2>
      <p class="subtitle">Focus on your workload - Drag to change priority</p>
    </div>

    <div class="filter-row">
      <span class="filter-label">Active Filters:</span>
      <mat-chip-listbox multiple>
        <mat-chip-option 
          *ngFor="let prio of availablePriorities()" 
          [selected]="selectedPriorities().includes(prio)"
          (click)="togglePriority(prio)">
          {{ prio }}
        </mat-chip-option>
      </mat-chip-listbox>
      <button mat-button color="warn" *ngIf="selectedPriorities().length > 0" (click)="clearFilters()">Reset</button>
    </div>
    
    <div class="stats-cards">
      <div class="stat-card full">
        <mat-icon class="stat-icon total">assignment</mat-icon>
        <div class="stat-content">
          <div class="stat-value">{{ stats().total }}</div>
          <div class="stat-label">Assigned to Me</div>
        </div>
      </div>
      <div class="stat-card warning">
        <mat-icon class="stat-icon unassigned">pending_actions</mat-icon>
        <div class="stat-content">
          <div class="stat-value">{{ stats().active }}</div>
          <div class="stat-label">Active Task</div>
        </div>
      </div>
      <div class="stat-card open">
        <mat-icon class="stat-icon resolved-icon">check_circle</mat-icon>
        <div class="stat-content">
          <div class="stat-value">{{ stats().resolved }}</div>
          <div class="stat-label">Resolved</div>
        </div>
      </div>
    </div>
  </div>

  <div class="jira-board" cdkDropListGroup>
    <div class="board-column" *ngFor="let column of columns()">
      <div class="column-header">
        <span class="header-title">{{ column.priority }}</span>
        <span class="header-count">{{ column.tickets.length }}</span>
      </div>

      <div class="column-list"
           cdkDropList
           [cdkDropListData]="column.tickets"
           (cdkDropListDropped)="drop($event, column.priority)">

        <div class="jira-issue-card"
             *ngFor="let ticket of column.tickets"
             cdkDrag
             (click)="goToTicket(ticket.ticketId)">
          <div class="issue-content">{{ ticket.title }}</div>
          <div class="issue-tags">
            <span class="tag tag-blue">{{ ticket.category }}</span>
            <span class="status-tag">{{ ticket.status }}</span>
          </div>
          <div class="issue-footer">
            <div class="footer-left">
              <mat-icon [class]="'prio-icon ' + ticket.priority?.toLowerCase()">flag</mat-icon>
              <span class="issue-key">#{{ ticket.ticketId }}</span>
            </div>
            <div class="footer-right">
               <div class="user-avatar">{{ (ticket.owner || '?').charAt(0).toUpperCase() }}</div>
            </div>
          </div>
        </div>

        <div class="empty-state-placeholder" *ngIf="column.tickets.length === 0">
          <div class="empty-icon-wrapper">
            <mat-icon>{{ getEmptyIcon(column.priority) }}</mat-icon>
          </div>
          <p class="empty-text">No {{ column.priority }} tickets</p>
          <span class="empty-subtext">Items will appear here once processed</span>
        </div>
      </div>
    </div>
  </div>
</div>