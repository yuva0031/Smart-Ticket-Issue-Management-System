<div class="manager-container">
  <div class="header">
    <div class="title-section">
      <h2>My Support Board</h2>
      <p class="subtitle">Track your requests and monitor real-time progress</p>
    </div>

    <div class="filter-row">
      <span class="filter-label">Focus on:</span>
      <mat-chip-listbox multiple>
        <mat-chip-option 
          *ngFor="let prio of availablePriorities()" 
          [selected]="selectedPriorities().includes(prio)"
          (click)="togglePriority(prio)">
          {{ prio }}
        </mat-chip-option>
      </mat-chip-listbox>
      <button mat-button color="warn" *ngIf="selectedPriorities().length > 0" (click)="clearFilters()">
        Reset
      </button>
    </div>
    
    <div class="stats-cards">
      <div class="stat-card full">
        <mat-icon class="stat-icon total">confirmation_number</mat-icon>
        <div class="stat-content">
          <div class="stat-value">{{ metrics().totalTickets }}</div>
          <div class="stat-label">Total Volume</div>
        </div>
      </div>
      
      <div class="stat-card warning">
        <mat-icon class="stat-icon unassigned">pending_actions</mat-icon>
        <div class="stat-content">
          <div class="stat-value">{{ metrics().pending }}</div>
          <div class="stat-label">Action Required</div>
        </div>
      </div>
      
      <div class="stat-card open">
        <mat-icon class="stat-icon open-icon">hourglass_empty</mat-icon>
        <div class="stat-content">
          <div class="stat-value">{{ metrics().open }}</div>
          <div class="stat-label">Initial Queue</div>
        </div>
      </div>
    </div>
  </div>

  <div class="jira-board">
    <div class="board-column" *ngFor="let column of columns()">
      
      <div class="column-header">
        <span class="header-title">{{ column.status }}</span>
        <span class="header-count">{{ column.tickets.length }}</span>
      </div>

      <div class="column-list">
        <div class="jira-issue-card"
             *ngFor="let ticket of column.tickets"
             (click)="goToTicket(ticket.ticketId)">

          <div class="issue-content">
            {{ ticket.title }}
          </div>

          <div class="issue-tags" *ngIf="ticket.category">
            <span class="tag tag-blue">{{ ticket.category }}</span>
          </div>

          <div class="issue-footer">
            <div class="footer-left">
              <mat-icon [class]="'prio-icon ' + ticket.priority.toLowerCase()">
                flag
              </mat-icon>
              <span class="issue-key">#{{ ticket.ticketId }}</span>
            </div>

            <div class="footer-right">
               <div class="user-avatar" [title]="ticket.assignedTo || 'Waiting for Agent'">
                 {{ (ticket.assignedTo || '?').charAt(0).toUpperCase() }}
               </div>
            </div>
          </div>
        </div>

        <div class="empty-state-placeholder" *ngIf="column.tickets.length === 0">
          <div class="empty-icon-wrapper">
            <mat-icon>{{ getEmptyIcon(column.status) }}</mat-icon>
          </div>
          <p class="empty-text">No {{ column.status }} tickets</p>
          <span class="empty-subtext">Items will appear here once processed</span>
        </div>
        
      </div>
    </div>
  </div>
</div>